% !TEX program = latexmk

\documentclass[b5paper,justified,nobib,nofonts]{tufte-book}

% fix for tufte-book working with XeLaTeX
\renewcommand\allcapsspacing[1]{{\addfontfeature{LetterSpace=15}#1}}
\renewcommand\smallcapsspacing[1]{{\addfontfeature{LetterSpace=10}#1}}

% Book metadata
\title{Andro Language -- Reference Guide}
\author{Koolder mal Erlehirni}
\publisher{Royal AndÃÅroyas Publishing House}

% For nicely typeset tabular material
\usepackage{booktabs}

% For graphics / images
\usepackage{graphicx}
\setkeys{Gin}{width=\linewidth,totalheight=\textheight,keepaspectratio}
\graphicspath{ {../images/} }
\usepackage{microtype}
\usepackage{libertine}

% fix for small caps in glosses
\renewcommand{\textsc}[1]{\textsmallcaps{#1}}

\usepackage{fancyvrb}
\fvset{fontsize=\normalsize}

\newcommand{\hangp}[1]{\makebox[0pt][r]{(}#1\makebox[0pt][l]{)}}
\newcommand{\hangstar}{\makebox[0pt][l]{*}}
\usepackage{xspace}

% Prints an epigraph and speaker in sans serif, all-caps type.
\newcommand{\openepigraph}[2]{%
  %\sffamily\fontsize{14}{16}\selectfont
  \begin{fullwidth}
  \sffamily\large
  \begin{doublespace}
  \noindent\allcaps{#1}\\% epigraph
  \noindent #2% author
  \end{doublespace}
  \end{fullwidth}
}

\newcommand{\blankpage}{\newpage\hbox{}\thispagestyle{empty}\newpage}

\usepackage{units}

\newcommand{\measure}[3]{#1/#2$\times$\unit[#3]{pc}}
\newcommand{\hlred}[1]{\textcolor{Maroon}{#1}}% prints in red
\newcommand{\hangleft}[1]{\makebox[0pt][r]{#1}}
\newcommand{\hairsp}{\hspace{1pt}}% hair space
\newcommand{\hquad}{\hskip0.5em\relax}% half quad space
\newcommand{\TODO}{\textcolor{red}{\bf TODO!}\xspace}
\newcommand{\ie}{\textit{i.\hairsp{}e.}\xspace}
\newcommand{\eg}{\textit{e.\hairsp{}g.}\xspace}
\newcommand{\na}{\quad--}% used in tables for N/A cells
\providecommand{\XeLaTeX}{X\lower.5ex\hbox{\kern-0.15em\reflectbox{E}}\kern-0.1em\LaTeX}
\newcommand{\tXeLaTeX}{\XeLaTeX\index{XeLaTeX@\protect\XeLaTeX}}
% \index{\texttt{\textbackslash xyz}@\hangleft{\texttt{\textbackslash}}\texttt{xyz}}
\newcommand{\tuftebs}{\symbol{'134}}% a backslash in tt type in OT1/T1
\newcommand{\doccmdnoindex}[2][]{\texttt{\tuftebs#2}}% command name -- adds backslash automatically (and doesn't add cmd to the index)
\newcommand{\doccmddef}[2][]{%
  \hlred{\texttt{\tuftebs#2}}\label{cmd:#2}%
  \ifthenelse{\isempty{#1}}%
    {% add the command to the index
      \index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2}}% command name
    }%
    {% add the command and package to the index
      \index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2} (\texttt{#1} package)}% command name
      \index{#1 package@\texttt{#1} package}\index{packages!#1@\texttt{#1}}% package name
    }%
}% command name -- adds backslash automatically
\newcommand{\doccmd}[2][]{%
  \texttt{\tuftebs#2}%
  \ifthenelse{\isempty{#1}}%
    {% add the command to the index
      \index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2}}% command name
    }%
    {% add the command and package to the index
      \index{#2 command@\protect\hangleft{\texttt{\tuftebs}}\texttt{#2} (\texttt{#1} package)}% command name
      \index{#1 package@\texttt{#1} package}\index{packages!#1@\texttt{#1}}% package name
    }%
}% command name -- adds backslash automatically
\newcommand{\docopt}[1]{\ensuremath{\langle}\textrm{\textit{#1}}\ensuremath{\rangle}}% optional command argument
\newcommand{\docarg}[1]{\textrm{\textit{#1}}}% (required) command argument
\newenvironment{docspec}{\begin{quotation}\ttfamily\parskip0pt\parindent0pt\ignorespaces}{\end{quotation}}% command specification environment
\newcommand{\docenv}[1]{\texttt{#1}\index{#1 environment@\texttt{#1} environment}\index{environments!#1@\texttt{#1}}}% environment name
\newcommand{\docenvdef}[1]{\hlred{\texttt{#1}}\label{env:#1}\index{#1 environment@\texttt{#1} environment}\index{environments!#1@\texttt{#1}}}% environment name
\newcommand{\docpkg}[1]{\texttt{#1}\index{#1 package@\texttt{#1} package}\index{packages!#1@\texttt{#1}}}% package name
\newcommand{\doccls}[1]{\texttt{#1}}% document class name
\newcommand{\docclsopt}[1]{\texttt{#1}\index{#1 class option@\texttt{#1} class option}\index{class options!#1@\texttt{#1}}}% document class option name
\newcommand{\docclsoptdef}[1]{\hlred{\texttt{#1}}\label{clsopt:#1}\index{#1 class option@\texttt{#1} class option}\index{class options!#1@\texttt{#1}}}% document class option name defined
\newcommand{\docmsg}[2]{\bigskip\begin{fullwidth}\noindent\ttfamily#1\end{fullwidth}\medskip\par\noindent#2}
\newcommand{\docfilehook}[2]{\texttt{#1}\index{file hooks!#2}\index{#1@\texttt{#1}}}
\newcommand{\doccounter}[1]{\texttt{#1}\index{#1 counter@\texttt{#1} counter}}

% Handle language and quotation marks
\usepackage{polyglossia}
\setdefaultlanguage[variant=american]{english}
\usepackage[
	style=american,
	english=american,
	autopunct,
]{csquotes}

\usepackage{multicol}
\usepackage{enumitem}
\usepackage{setspace}
\usepackage{booktabs}
\usepackage{hyperref}
\usepackage{lscape}
\usepackage{xspace}
\usepackage{relsize}

% Linguistic things
\usepackage{vowel}
\usepackage{leipzig}
\usepackage{gb4e}\noautomath
\usepackage{typgloss}
\usepackage{dictionary}

\makeglossaries
\newleipzig{an}{an}{animated}
\newleipzig{inan}{inan}{inanimated}
\renewleipzig{comp}{comp}{comparative}
\newleipzig{hort}{hort}{hortative}
\newleipzig{exh}{exh}{exhortative}
\newleipzig{chr}{chr}{cohortative}
\newleipzig{opt}{opt}{optative}
\newleipzig{frm}{frm}{formal}
\newleipzig{nfrm}{nfrm}{non-formal}
\newleipzig{fem}{fem}{feminine}
\newleipzig{ven}{ven}{venitive}
\newleipzig{dim}{dim}{diminutive}
\newleipzig{ord}{ord}{ordinal numeral}
\newleipzig{supl}{supl}{superlative}
\newleipzig{hon}{hon}{honorific}
\newleipzig{emph}{emph}{emphasizer}

\newcommand{\randro}[1]{{\textit{#1}}}
\newcommand{\andro}{\emph{andro}\xspace}
\newcommand{\tandro}[2]{\textit{#1}\footnotemark\footnotetext{\textit{andr.} #2}}
% \newcommand{\rand}[2]{\smash{{\Tagati #1}} \emph{#2}} % Ayeri orthography + *r*omanization
% \newcommand{\tand}[2]{\emph{#1} `#2'} % Romanization + *t*ranslation
% \newcommand{\xand}[3]{\zwsp\smash{\Tagati #1} \emph{#2} `#3'} % Ayeri orthography + romanization + translation

% Generates the index
% \usepackage{makeidx}
% \makeindex

\begin{document}

% Front matter
\frontmatter

% there should be cover?

% blank page
\blankpage

% citations
\newpage\thispagestyle{empty}
\input{epigraphs.tex}

% full title page
\maketitle

% colophon
\newpage
\input{colophon.tex}

% table of contents
\tableofcontents

% dedication
% \cleardoublepage
% \input{dedication.tex}

% introduction out of universe
\cleardoublepage
\chapter*{Preface}
\input{chapters/preface.tex}

%%
% Start the main matter (normal chapters)
\mainmatter

\input{chapters/introduction.tex}
\input{chapters/background.tex}
\input{chapters/phonetics.tex}
\input{chapters/morphology.tex}
\input{chapters/syntax.tex}
\input{chapters/derivational.tex}

% back matter
\backmatter

\input{chapters/appendix-writing.tex}
% \input{chapters/appendix-examples.tex}

% \bibliography{sample-handout}
% \bibliographystyle{plainnat}

\listoffigures

\listoftables

\printglosses[style=list]

% \printindex

\end{document}
